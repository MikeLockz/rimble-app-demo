(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,n){e.exports=n(494)},228:function(e,t){},230:function(e,t){},328:function(e,t){},409:function(e,t){},494:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(78),c=n.n(o),i=n(12),s=n(13),l=n(15),u=n(14),p=n(16),m=n(203),d=n(3),b=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{bg:"primary",p:3,justifyContent:"center",flexDirection:"column"},r.a.createElement(d.d,{justifyContent:"flex-end"},r.a.createElement(d.f,{href:"https://github.com/ConsenSys/rimble-app-demo",target:"_blank"},r.a.createElement(d.b,null,"GitHub"))),r.a.createElement(d.a,{width:"400px",mx:"auto"},r.a.createElement(d.e.h2,{color:"white"},"Rimble App Demo")))}}]),t}(r.a.Component),h=n(207),f=n(39),g=n.n(f),w=n(80),y=n(119),v=n.n(y),E=r.a.createContext({contract:{},account:{},web3:{},initWeb3:function(){},initContract:function(){},initAccount:function(){}}),C=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).initWeb3=Object(w.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},window.ethereum?(console.log("Using modern web3 provider."),t=new v.a(window.ethereum)):window.web3?(console.log("Legacy web3 provider. Try updating."),t=new v.a(window.web3.currentProvider)):(console.log("Non-Ethereum browser detected. You should consider trying MetaMask!"),t=!1),n.setState({web3:t});case 3:case"end":return e.stop()}},e,this)})),n.initContract=function(){var e=Object(w.a)(g.a.mark(function e(t,a){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("creating contract"),e.prev=1,e.next=4,new n.state.web3.eth.Contract(a,t);case 4:r=e.sent,n.setState({contract:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Could not create contract."),window.toastProvider.addMessage("Contract creation failed.",{variant:"failure"});case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),n.initAccount=Object(w.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.enable().then(function(e){var t=e[0];n.setState({account:t}),console.log("wallet address:",n.state.account)});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error:",e.t0),window.toastProvider.addMessage("User needs to CONNECT wallet",{variant:"failure"});case 9:case"end":return e.stop()}},e,this,[[0,5]])})),n.contractMethodSendWrapper=function(e){var t={};t.created=Date.now(),console.log("Starting Transaction"),t.status="started",n.showTransactionToast(t);var a=n.state,r=a.contract,o=a.account;try{r.methods[e]().send({from:o}).on("transactionHash",function(e){console.log("Transaction sent to block successfully. Result pending."),t.status="pending",n.showTransactionToast(t)}).on("confirmation",function(e,a){console.log("receipt: ",a,"confirmation number: ",e);if(0===e)console.log("Transaction confirmed."),t.status="confirmed",n.showTransactionToast(t);else{if(e<3)return void console.log("Confirmation "+e+". Threshold for confidence not met.");if(3===e)return console.log("Confidence threshold met."),a.status?(console.log("Transaction completed successfully!"),t.status="success"):a.status||(console.log("Transaction reverted due to error."),t.status="error"),void n.showTransactionToast(t);if(e>3)return void console.log("Confirmation "+e+". Confidence threshold already met.")}}).on("receipt",function(e){console.log("receipt: ",e)}).on("error",function(e){console.log(e),t.status="error",n.showTransactionToast(t)})}catch(c){console.log("Error calling method on smart contract."),t.status="error",n.showTransactionToast(t)}},n.showTransactionToast=function(e){var t={};t.lastUpdated=Date.now(),t=Object(h.a)({},t,e);var a=n.getTransactionToastMeta(t);window.toastProvider.addMessage(".",a)},n.getTransactionToastMeta=function(e){var t={},n=e.status,a=e.transactionHash;switch(n){case"started":t={message:"Change submitted",secondaryMessage:"Confirm in MetaMask",actionHref:"",actionText:"",variant:"default",icon:"InfoOutline"};break;case"pending":t={message:"Processing change...",secondaryMessage:"This may take a few minutes",actionHref:"",actionText:"",variant:"processing"};break;case"confirmed":t={message:"First block confirmed",secondaryMessage:"Your change is in progress",actionHref:"https://rinkeby.etherscan.io/tx/"+a,actionText:"Check progress",variant:"processing"};break;case"success":t={message:"Smart contract value changed",variant:"success"};break;case"error":t={message:"Value change failed",secondarymessage:"Make sure you have enough Ether (ETH) and try again",actionHref:"https://rinkeby.etherscan.io/tx/"+a,actionText:"View on Etherscan",variant:"failure"}}return t},n.state={contract:{},account:null,web3:null,initWeb3:n.initWeb3,initContract:n.initContract,initAccount:n.initAccount,contractMethodSendWrapper:n.contractMethodSendWrapper},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initWeb3()}},{key:"render",value:function(){return r.a.createElement(E.Provider,Object.assign({value:this.state},this.props))}}]),t}(r.a.Component);C.Consumer=E.Consumer;var k=C,j=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.d,{flexDirection:"column",alignItems:"center",px:3,py:5},r.a.createElement(d.e.h3,{textAlign:"center",pb:4},"Connect with MetaMask to try out the demo"),r.a.createElement(d.g,{size:"medium",mx:"auto",onClick:this.props.initAccount,disabled:this.props.account},"Connect with MetaMask"))}}]),t}(r.a.Component),O=n(206),x=[{constant:!1,inputs:[],name:"decrementCounter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"incrementCounter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"reset",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[],name:"getCounter",outputs:[{name:"",type:"int256"}],payable:!1,stateMutability:"view",type:"function"}],M=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},n.getNumber=function(e){Object(O.a)({},e);var t=n.props.contract;try{t.methods.getCounter().call().then(function(e){e=Number(e.toString()),n.setState({value:e})}).catch(function(e){console.log(e),n.setState({error:e})})}catch(a){console.log("error",a)}},n.resetCounter=function(){n.props.contractMethodSendWrapper("reset")},n.incrementCounter=function(){n.props.contractMethodSendWrapper("incrementCounter")},n.decrementCounter=function(){n.props.contractMethodSendWrapper("decrementCounter")},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.initContract("0x0f69f0ac4b92bf0d101b5747eed3fa6b653a36f8",x).then(function(){e.getNumber()})}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(d.d,{px:0,pb:4,borderBottom:1,borderColor:"#E8E8E8",justifyContent:"space-between",alignItems:"center"},r.a.createElement(d.i,{mb:2,fontSize:3},"Smart contract value"),r.a.createElement(d.h,{size:"medium",onClick:this.resetCounter,disabled:!this.props.account},"Reset")),r.a.createElement(d.a,{py:4},r.a.createElement(d.i,{fontSize:6,textAlign:"center"},this.state.value)),r.a.createElement(d.d,{px:0,pt:4,borderTop:1,borderColor:"#E8E8E8",justifyContent:"space-between"},r.a.createElement(d.b,{size:"medium",mr:4,onClick:this.incrementCounter},"Increase value"),r.a.createElement(d.b,{size:"medium",onClick:this.decrementCounter},"Decrease value")))}}]),t}(r.a.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(k.Consumer,null,function(e){var t=e.contract,n=e.account,a=e.initContract,o=e.initAccount,c=e.contractMethodSendWrapper;return r.a.createElement(d.c,{width:"400px",mx:"auto",px:4},n?r.a.createElement(M,{contract:t,account:n,initContract:a,contractMethodSendWrapper:c}):r.a.createElement(j,{initAccount:o,account:n}))})}}]),t}(r.a.Component),S=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{width:"400px",mx:"auto",mt:4},r.a.createElement(d.e.h3,null,"Instructions:"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(d.i,{p:1},"Make sure MetaMask is working in your browser")),r.a.createElement("li",null,r.a.createElement(d.i,{p:1},"Set the network to Rinkeby Test Network")),r.a.createElement("li",null,r.a.createElement(d.i,{p:1},"You'll need a little bit of ETH for gas fees"))))}}]),t}(r.a.Component),W=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.c,{width:"600px",mx:"auto",px:4},r.a.createElement(d.e.h2,null,"No Web3 Provider Available"),r.a.createElement(d.i,null,"You will need to ",r.a.createElement(d.f,{href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en",target:"_blank"},"install MetaMask")," to use this dApp."))}}]),t}(r.a.Component),A={fontSizes:[12,14,16,20,24,32,48,64],fontWeights:[0,300,400,600,700],lineHeights:{solid:1,title:1.25,copy:1.5},fonts:{serif:"athelas, georgia, times, serif",sansSerif:'"Source Sans Pro", -apple-system, sans-serif'},space:[0,4,8,16,32,64,128,256],radii:["0","4px","8px","16px"],width:[0,16,32,64,128,256],minWidths:[0,16,32,64,128,256],maxWidths:[0,16,32,64,128,256,512,768,1024,1536],heights:[0,16,32,64,128,256],minHeights:[0,16,32,64,128,256],maxHeights:[0,16,32,64,128,256],borders:[0,"1px solid"],shadows:["0","0px 2px 4px rgba(0, 0, 0, 0.1)","0 7px 14px rgba(50,50,93,.1)"],opacity:{disabled:.4},colors:{primary:"#4E3FCE",blue:"#007ce0",navy:"#004175",copyColor:"#3F3D4B",black:"#000e1a","near-black":"#111","dark-gray":"#333","mid-gray":"#555",grey:"#CCC",silver:"#999","light-silver":"#aaa","moon-gray":"#ccc","light-gray":"#eee","near-white":"#f4f4f4",white:"#fff",transparent:"transparent",blacks:["rgba(0,0,0,.0125)","rgba(0,0,0,.025)","rgba(0,0,0,.05)","rgba(0,0,0,.1)","rgba(0,0,0,.2)","rgba(0,0,0,.3)","rgba(0,0,0,.4)","rgba(0,0,0,.5)","rgba(0,0,0,.6)","rgba(0,0,0,.7)","rgba(0,0,0,.8)","rgba(0,0,0,.9)"],whites:["rgba(255,255,255,.0125)","rgba(255,255,255,.025)","rgba(255,255,255,.05)","rgba(255,255,255,.1)","rgba(255,255,255,.2)","rgba(255,255,255,.3)","rgba(255,255,255,.4)","rgba(255,255,255,.5)","rgba(255,255,255,.6)","rgba(255,255,255,.7)","rgba(255,255,255,.8)","rgba(255,255,255,.9)"]}},H=n(1);function P(){var e=Object(m.a)(["\n  body, html {\n    margin: 0;\n    padding: 0;\n    background-color: #efefef;\n  }\n"]);return P=function(){return e},e}var D=Object(H.b)(P()),N=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.j,{theme:A,className:"App"},r.a.createElement(b,null),r.a.createElement(d.d,{justifyContent:"center",p:4},r.a.createElement(d.i,{width:"400px"},"This is a starter React dApp that uses the Rimble UI component library to call methods on a smart contract deployed to the Ethereum Rinkeby testnet.")),r.a.createElement(k,null,r.a.createElement(k.Consumer,null,function(e){var t=e.web3;return r.a.createElement(d.a,null,t?r.a.createElement(T,null):r.a.createElement(W,null))})),r.a.createElement(d.k.Provider,{ref:function(e){return window.toastProvider=e}}),r.a.createElement(S,null),r.a.createElement(D,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[209,2,1]]]);
//# sourceMappingURL=main.47a83c64.chunk.js.map